upstream mark_six{
  server localhost:8082;
}

server {
  listen   80;
  server_name  www.besttsq.xyz;

  location / {
    proxy_pass http://mark_six;
  }
}


upstream tomcat_server{
  server localhost:8080;
}

server {
  listen       80;
  server_name  tomcat.besttsq.xyz;

  location / {
    proxy_pass http://tomcat_server;
    index /home/tsq/app/markSix/index.html;
  }
}
upstream cxq_server{
  server localhost:8081;
#  keepalive 50;
}

server {
  listen       80;
  server_name  cxq.besttsq.xyz;

  location / {
    proxy_pass http://cxq_server;
    # proxy_http_version 1.1;
    # proxy_set_header Connectioin "";
    proxy_set_header Host $host; # webserver can useing X-Forwarded-For get the real ip of the request by add this line
 #   index /home/tsq/app/markSix/index.html;
  }
}



upstream jenkins_server{
  server localhost:8888;
}

server {
  server_name  jekins.besttsq.xyz;

  location / {
    proxy_pass http://jenkins_server;
  }

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/jekins.besttsq.xyz/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/jekins.besttsq.xyz/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}


server {
    if ($host = jekins.besttsq.xyz) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


  listen       80;
  server_name  jekins.besttsq.xyz;
    return 404; # managed by Certbot


}

